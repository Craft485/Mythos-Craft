(()=>{"use strict";const e=document.getElementById("card-display"),t=document.getElementById("decks-display"),n={};let c=null;function a(e,t){const n=document.createElement("div");n.className="card";const c=document.createElement("h3");c.innerHTML=`<b>${e.name}</b>`;const a=document.createElement("div");a.className="card-count-display",a.innerText=`x${t}`;const d=document.createElement("div");return d.innerHTML=`<span class="card-cost-display">${e.cost}</span> / <span class="card-health-display">${e.health}</span> / <span class="card-attack-display">${e.attack}</span>`,n.appendChild(c),n.appendChild(a),n.appendChild(document.createElement("br")),n.appendChild(d),n}function d(e,t){const n=document.getElementById("card-preview-overlay");n&&n.remove();const d=[];Array.from(document.querySelectorAll(`#${Array.from(document.getElementById("display-container").children)[Array.from(document.querySelectorAll("#card-display-filters > input")).findIndex((e=>e.id===document.querySelector("#card-display-filters > input:checked").id))].id} > .card`)).forEach((e=>{d.push([e,e.style.display||null]),e.style.display="none"}));const l=document.createElement("div");l.id="card-preview-overlay";const r=document.createElement("button");r.id="cancel-card-preview-overlay",r.innerText="X",r.onclick=()=>{d.forEach((e=>e[1]?e[0].style.display=e[1]:e[0].removeAttribute("style"))),l.remove()},l.appendChild(r);const o=c[e],i=a(o,t);i.id="card-preview-card-panel";const s=document.createElement("div");s.id="card-preview-break-down-panel";const p=document.createElement("ul");p.id="card-preview-stats-panel";const m=document.createElement("li");m.className="card-rarity-display",m.innerText="Rarity: N/A";const u=document.createElement("li");u.className="card-attack-display",u.innerText=`Base attack: ${o.attack||"N/A"}`;const y=document.createElement("li");y.className="card-health-display",y.innerText=`Base health: ${o.health||"N/A"}`;const h=document.createElement("li");h.className="card-cost-display",h.innerText=`Base cost: ${o.cost||"N/A"}`,p.appendChild(m),p.appendChild(h),p.appendChild(y),p.appendChild(u),s.appendChild(p);const v=document.createElement("p");v.id="card-preview-information-panel",v.innerHTML=o.description;const f=document.createElement("p");return f.id="card-preview-information-panel-indepth",f.innerHTML="Work in Progress | Information pending",l.appendChild(i),l.appendChild(s),l.appendChild(v),l.appendChild(f),l}document.getElementById("signout").onclick=()=>fetch("signout",{method:"POST"}).then((()=>window.location.pathname="/")),window.onload=async function(){(await fetch("cardlist",{method:"POST"})).json().then((l=>{if(console.log(l),l.success){c=l.status.cardList,console.log(c),document.getElementById("user-name-display").innerText=l.status.userData.username||"null",document.getElementById("orichalcum-display").innerText=`${l.status.orichalcum}`||"0";for(const t in l.status.inventory){const n=a(l.status.cardList[t],l.status.inventory[t]);n.onclick=()=>{e.appendChild(d(t,l.status.inventory[t]))},e.appendChild(n)}for(const e of l.status.deckData){const l=JSON.parse(e.cards),r=Object.values(l).reduce(((e,t)=>e+t),0);n[e.name]={id:e.deckID,cards:l};const o=document.createElement("div");o.className="card deck-title-card";const i=document.createElement("h3");i.innerHTML=`<b>${e.name}</b>`;const s=document.createElement("div");s.className="card-count-display",s.innerText=`x${r}`,o.appendChild(i),o.appendChild(s),o.appendChild(document.createElement("hr")),o.onclick=()=>{const l=document.createElement("div");l.id="deck-preview-overlay";const r=document.createElement("button");r.id="cancel-deck-preview-overlay",r.innerText="X",r.onclick=()=>l.remove(),l.appendChild(r);const o=document.createElement("div");o.id="deck-preview-overlay-display";for(const[t,r]of Object.entries(n[e.name].cards)){const e=a(c[t],r);e.onclick=()=>{l.appendChild(d(t,r))},o.appendChild(e)}l.appendChild(o),t.appendChild(l)},t.appendChild(o)}}else-1===l.state?document.getElementById("display-container").innerText=`${l.status}`:0===l.state&&(window.location.pathname="/")})),function(){const e=Array.from(document.querySelectorAll("#card-display-filters > label"));for(const t of e)t.addEventListener("click",(e=>{e.preventDefault(),document.querySelectorAll('[id*="overlay"]').forEach((e=>e.remove())),document.querySelectorAll('.card[style="display: none;"]').forEach((e=>e.removeAttribute("style"))),Array.from(document.querySelectorAll('#card-display-filters > input[type="checkbox"]')).find((e=>e.checked)).checked=!1,document.querySelector(`#${t.htmlFor.toLowerCase()}`).checked=!0,document.querySelector("#display-container > section[style]")?.removeAttribute("style"),document.querySelector(`#display-container > section[name="${t.htmlFor.toLowerCase()}"]`).style.display="flex"}));document.querySelector("#display-container > :first-child").style.display="flex"}()}})();